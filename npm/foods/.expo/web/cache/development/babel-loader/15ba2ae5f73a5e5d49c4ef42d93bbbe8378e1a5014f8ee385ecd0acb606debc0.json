{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useEffect, useState } from \"react\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport CheckoutForm from \"./CheckoutForm\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction Payment() {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    stripePromise = _useState2[0],\n    setStripePromise = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    clientSecret = _useState4[0],\n    setClientSecret = _useState4[1];\n  useEffect(function () {\n    fetch(\"/config\").then(function () {\n      var _ref = _asyncToGenerator(function* (r) {\n        var _yield$r$json = yield r.json(),\n          publishableKey = _yield$r$json.publishableKey;\n        setStripePromise(loadStripe(publishableKey));\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  }, []);\n  useEffect(function () {\n    fetch(\"/create-payment-intent\", {\n      method: \"POST\",\n      body: JSON.stringify({})\n    }).then(function () {\n      var _ref2 = _asyncToGenerator(function* (result) {\n        var _yield$result$json = yield result.json(),\n          clientSecret = _yield$result$json.clientSecret;\n        setClientSecret(clientSecret);\n      });\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n  }, []);\n  return _jsxs(_Fragment, {\n    children: [_jsx(\"h1\", {\n      children: \"React Stripe and the Payment Element\"\n    }), clientSecret && stripePromise && _jsx(Elements, {\n      stripe: stripePromise,\n      options: {\n        clientSecret: clientSecret\n      },\n      children: _jsx(CheckoutForm, {})\n    })]\n  });\n}\nexport default Payment;","map":{"version":3,"names":["useEffect","useState","Elements","CheckoutForm","loadStripe","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Payment","_useState","_useState2","_slicedToArray","stripePromise","setStripePromise","_useState3","_useState4","clientSecret","setClientSecret","fetch","then","_ref","_asyncToGenerator","r","_yield$r$json","json","publishableKey","_x","apply","arguments","method","body","JSON","stringify","_ref2","result","_yield$result$json","_x2","children","stripe","options"],"sources":["C:/npm/foods/src/Payment.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\nimport CheckoutForm from \"./CheckoutForm\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\n\r\nfunction Payment() {\r\n  const [stripePromise, setStripePromise] = useState(null);\r\n  const [clientSecret, setClientSecret] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    fetch(\"/config\").then(async (r) => {\r\n      const { publishableKey } = await r.json();\r\n      setStripePromise(loadStripe(publishableKey));\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetch(\"/create-payment-intent\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({}),\r\n    }).then(async (result) => {\r\n      var { clientSecret } = await result.json();\r\n      setClientSecret(clientSecret);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <h1>React Stripe and the Payment Element</h1>\r\n      {clientSecret && stripePromise && (\r\n        <Elements stripe={stripePromise} options={{ clientSecret }}>\r\n          <CheckoutForm />\r\n        </Elements>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Payment;"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE3C,SAASC,QAAQ,QAAQ,yBAAyB;AAClD,OAAOC,YAAY;AACnB,SAASC,UAAU,QAAQ,mBAAmB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAE/C,SAASC,OAAOA,CAAA,EAAG;EACjB,IAAAC,SAAA,GAA0CX,QAAQ,CAAC,IAAI,CAAC;IAAAY,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAjDG,aAAa,GAAAF,UAAA;IAAEG,gBAAgB,GAAAH,UAAA;EACtC,IAAAI,UAAA,GAAwChB,QAAQ,CAAC,EAAE,CAAC;IAAAiB,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAA7CE,YAAY,GAAAD,UAAA;IAAEE,eAAe,GAAAF,UAAA;EAEpClB,SAAS,CAAC,YAAM;IACdqB,KAAK,CAAC,SAAS,CAAC,CAACC,IAAI;MAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAC,WAAOC,CAAC,EAAK;QACjC,IAAAC,aAAA,SAAiCD,CAAC,CAACE,IAAI,CAAC,CAAC;UAAjCC,cAAc,GAAAF,aAAA,CAAdE,cAAc;QACtBZ,gBAAgB,CAACZ,UAAU,CAACwB,cAAc,CAAC,CAAC;MAC9C,CAAC;MAAA,iBAAAC,EAAA;QAAA,OAAAN,IAAA,CAAAO,KAAA,OAAAC,SAAA;MAAA;IAAA,IAAC;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN/B,SAAS,CAAC,YAAM;IACdqB,KAAK,CAAC,wBAAwB,EAAE;MAC9BW,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC;IACzB,CAAC,CAAC,CAACb,IAAI;MAAA,IAAAc,KAAA,GAAAZ,iBAAA,CAAC,WAAOa,MAAM,EAAK;QACxB,IAAAC,kBAAA,SAA6BD,MAAM,CAACV,IAAI,CAAC,CAAC;UAApCR,YAAY,GAAAmB,kBAAA,CAAZnB,YAAY;QAClBC,eAAe,CAACD,YAAY,CAAC;MAC/B,CAAC;MAAA,iBAAAoB,GAAA;QAAA,OAAAH,KAAA,CAAAN,KAAA,OAAAC,SAAA;MAAA;IAAA,IAAC;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN,OACErB,KAAA,CAAAF,SAAA;IAAAgC,QAAA,GACElC,IAAA;MAAAkC,QAAA,EAAI;IAAoC,CAAI,CAAC,EAC5CrB,YAAY,IAAIJ,aAAa,IAC5BT,IAAA,CAACJ,QAAQ;MAACuC,MAAM,EAAE1B,aAAc;MAAC2B,OAAO,EAAE;QAAEvB,YAAY,EAAZA;MAAa,CAAE;MAAAqB,QAAA,EACzDlC,IAAA,CAACH,YAAY,IAAE;IAAC,CACR,CACX;EAAA,CACD,CAAC;AAEP;AAEA,eAAeQ,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}